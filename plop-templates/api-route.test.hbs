/**
 * @jest-environment node
 */
import { GET, POST } from './route';
import { NextRequest } from 'next/server';

describe('API Route: {{path}}', () => {
  it('GET returns success', async () => {
    const request = new NextRequest('http://localhost:3000/api/{{path}}');
    const response = await GET(request);
    const data = await response.json();
    expect(response.status).toBe(200);
    expect(data).toHaveProperty('message');
  });

  it('POST creates resource', async () => {
    const request = new NextRequest('http://localhost:3000/api/{{path}}', {
      method: 'POST',
      body: JSON.stringify({ test: 'data' }),
    });
    const response = await POST(request);
    expect(response.status).toBe(201);
  });

  it('GET handles errors gracefully', async () => {
    // Test error handling
    const request = new NextRequest('http://localhost:3000/api/{{path}}');
    const response = await GET(request);
    expect(response.status).toBeGreaterThanOrEqual(200);
  });

  it('POST validates request body', async () => {
    const request = new NextRequest('http://localhost:3000/api/{{path}}', {
      method: 'POST',
      body: JSON.stringify({ test: 'data' }),
    });
    const response = await POST(request);
    const data = await response.json();
    expect(data).toBeDefined();
  });
});
